<!--
 * Copyright (c) 2021, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.

 NOTE: Borrowed generously from MkDocs and MkDocs-material
-->

{% import "partials/language.html" as lang with context %}
<nav class="md-nav md-nav--secondary">
    {% set toc_ = page.toc %}
    {% if toc_ | first is defined and "\x3ch1 id=" in page.content %}
    {% set toc_ = (toc_ | first).children %}
    {% endif %}
    {% if toc_ | first is defined %}
    <a href="#" title="On this page" class="nav_link md-icon md-content__icon toc_icon" id="tocToggleBtn">toc</a>
    <label class="md-nav__title" for="__toc">{{ lang.t("toc.title") }}</label>
    <ul class="md-nav__list" data-md-scrollfix>
        {% for toc_item in toc_ %}
        {% include "partials/toc-item.html" %}
        {% endfor %}
        {% if page.meta.source and page.meta.source | length > 0 %}
        <li class="md-nav__item">
            <a href="#__source" title="{{ lang.t('meta.source') }}" class="md-nav__link md-nav__link--active">
                {{ lang.t("meta.source") }}
            </a>
        </li>
        {% endif %}
        {% set disqus = config.extra.disqus %}
        {% if page and page.meta and page.meta.disqus is string %}
        {% set disqus = page.meta.disqus %}
        {% endif %}
        {% if not page.is_homepage and disqus %}
        <li class="md-nav__item">
            <a href="#__comments" title="{{ lang.t('meta.comments') }}" class="md-nav__link md-nav__link--active">
                {{ lang.t("meta.comments") }}
            </a>
        </li>
        {% endif %}
    </ul>
    {% endif %}
</nav>
